axis(2,pos=c(0,0))
plot(u2,v2, xlab="x", ylab="y")
axis(2,pos=c(0,0),tck=0)
axis(1,pos=c(0,0),tck=0)
plot(u2,v2, xlab="x", ylab="y")
axis(2,at=c(),pos=c(0,0),tck=0)
plot(u2,v2, xlab="x", ylab="y")
axis(2,at=c(0),pos=c(0,0),tck=0)
axis(2,pos=c(0,0),tck=0)
axis(2,at=c(0),pos=c(0,0),tck=0)
axis(2,pos=c(0,0),labels = FALSE, tck=0)
plot(u2,v2, xlab="x", ylab="y")
axis(2,pos=c(0,0),labels = FALSE, tck=0)
axis(2,pos=c(0,0),labels = FALSE, tck=0, xpd=TRUE)
plot(u2,v2, xlab="x", ylab="y")
axis(2,pos=c(0,0),labels = FALSE, tck=0, xpd=TRUE)
axis(2,pos=c(-8,6),labels = FALSE, tck=0, xpd=TRUE)
axis(2,pos=c(-8,6),labels = FALSE, tck=0, xpd=NA)
plot(u2,v2, xlab="x", ylab="y")
axis(2,pos=c(-8,6),labels = FALSE, tck=0, xpd=NA)
plot(u2,v2, xlab="x", ylab="y")
axis(2,pos=c(-8,6),labels = FALSE, tck=0)
plot(u2,v2, xlab="x", ylab="y")
axis(2,at=c(-8,6),pos=c(0,0),labels = FALSE, tck=0)
axis(1,at=c(-8,6),pos=c(0,0),labels = FALSE, tck=0)
load("D:/Ascem/data/precipitation/rain.RData")
setwd("D:/Ascem/data/precipitation")
install.packages(c("maptools", "lattice", "LatticeKrig", "mapdata", "mapproj"))
install.packages("rgdal")
View(rain1)
rain1$date>1961-01-03
rain1$date[rain1$date=0]
rain1$date[rain1$date==0]
rain1$date[rain1$date==-1]
rain1$date[rain1$date==1]
rain1$date[rain1$date==365]
a<-as.date(0)
help(as.Date)
install.packages("date")
install.packages("xts")
a=seq(as.Date("1970-01-01"), length.out=40, by="1 year")
a
length(a)
year(a[2])
ISODate(2001, 1, 1)
a[2]
max(a)
min(a)
a[2].year
months(a[2])
months(a[2])==1
as.POSIXlt(a[2])$year+1900
a[2]>as.Date("2001-09-30")
a[2]>as.Date("1960-09-30")
c(as.POSIXlt(a[2])$year+1900,"-01-01"")
""
c(as.POSIXlt(a[2])$year+1900,"-01-01")
minyear=as.POSIXlt(min(a))$year+1900
minyear
min(a)>as.Date(paste(minyear,"-10-01",sep="")
)
min(a)<as.Date(paste(minyear,"-10-01",sep=""))
paste(minyear+1,"-10-01",sep="")
seq(as.Date("1970-10-01"), length.out=10, by="1 year")
?zoo
install.packages("zoo")
install.packages("zoo")
install.packages("zoo")
library(zoo)
unattach(zoo)
detach(zoo)
x.Date <- as.Date("2003-02-01") + c(1, 3, 7, 9, 14) - 1
x <- zoo(rnorm(5), x.Date)
plot(x)
time(x)
x[c(2, 4)]
ISOdatetime(2001,12,18,0,0,0)
x1 <- zoo(1:5, 1:5)
x1
x2 <- zoo(2:6, 2:6)
x2
10 * x1 + x2
x1. <- x1 <- zoo (matrix (1:12, nrow = 3), as.Date("2008-08-01") + 0:2)
colnames (x1) <- c ("A", "B", "C", "D")
x2 <- zoo (matrix (1:12, nrow = 3), as.Date("2008-08-01") + 1:3)
colnames (x2) <- c ("B", "C", "D", "E")
both.dates = as.Date (intersect (index (t1), index (t2)))
both.dates = as.Date (intersect (index (x1), index (x2)))
both.cols = intersect (colnames (x1), colnames (x2))
x1[both.dates, both.cols]
rain2 <- read.zoo("19610101-20110401-rain.txt", format = "%m/%d/%Y", sep=",", header=TRUE)
rain2 <- read.zoo("19610101-20110401-rain.txt", format = "%m/%d/%Y", sep=",", header=TRUE)
library(xts)
rain.yearly<-apply.yearly(rain2, "sum")
rain.yearly
rain2
rain2$x200.F
start(rain2)
end(rain2)
plot(rain2)
rain2 <- read.zoo("19610101-20110401rain.txt", format = "%m/%d/%Y", sep=",", header=TRUE)
start(rain2)
plot(rain2)
plot(rain2$X700.A)
plot(rain2$X200.F)
rain2.yearly<-apply.yearly(rain2$X200.F,"sum")
plot(rain2.yearly)
endpoints(rain2,on='years', k=1)
365*62
install.packages("XML")
period.sum(c(1,1,4,2,2,6,7,8,-1,20),c(0,3,5,8,10))
a
is.Date(a[1])
typeof(a[1])
isS4(a[1])
is.object(a[1])
class(a[1])
class(a)
class(a)=="Date"
sum(a)
rm(both.dates)
rm(both.cols)
rm(x.Date)
rm(x1)
rm(x2)
rm(x1.)
rm(x)
savehistory(hydro1.Rhistory)
savehistory("D:/Ascem/data/precipitation/hydro1history.Rhistory")
lvec1 <- rep(c(TRUE, FALSE, NA), times=3)
lvec1
lvec2 <- rep(c(TRUE, FALSE, NA), each=3)
lvec2
lvec1 & lvec2
lvec1 | lvec2
FALSE | NA
library(maptools)
install.packages(rgeos)
install.packages("rgeos")
library(maptools)
install.packages("HydroMe")
library(HydroMe)
fix(dates)
save.image("D:/Ascem/data/precipitation/rain23.RData")
setwd("D:/SRS/data_SRS/Hydrologie_calculs")
aiken1<-read.table("Aiken5SE_1940_1966.txt",header=1,sep="\t")
edisto<-read.tale("Edisto_discharge.csv",header=1,sep=",")
edisto<-read.table("Edisto_discharge.csv",header=1,sep=",")
?xts
??xts
library(zoo)
edisto2<-read.zoo("Edisto_discharge.csv", format = "%m/%d/%Y", sep=",", header=TRUE)
library(xts)
edisto1<-apply.monthly(edisto2,"sum")
fix(edisto1)
View(aiken1)
26 % 12
26%12
26/12
1 %/% .2
26 %% 12
-1 %% 12
plot(edisto1)
plot(aiken11)
plot(aiken1)
a<-as.yearmon(aiken1$YEAR+aiken1$MONTH/12)
a
a<-as.yearmon(aiken1$YEAR+(aiken1$MONTH-1)/12)
a
aiken<-aiken1
aiken$Date<-a
edisto3<-as.xts(edisto1)
fix(edisto1)
fix(edisto1)
write.csv(edisto3, file="edisto3.csv")
View(edisto)
edisto$discharge2-edisto$discharge*86400*.3048^3
edisto$discharge2<-edisto$discharge*86400*.3048^3
View(edisto)
edisto2*2
ed<-edisto2*86400*.3048^3
View(aiken1)
View(aiken)
View(aiken1)
View(aiken)
ed2<-as.xts(ed)
ed1<-apply.monthly(ed2,"sum")
write.csv(ed1, file="edi1.csv")
write.csv(reclass(ed1), file="edi1.csv")
aiken$ppt<-aiken$Total*0.0254
fix(ed1)
area<-1612^2
ed3<-ed1/area
View(aiken)
aik1<-as.xts(aiken$ppt,aiken$Date)
plot(cumsum(aik1))
plot(cumsum(ed3),cumsum(aik1))
t.zoo<- merge(aik1,ed3,all=FALSE)
typeof(aik1)
plot(cumsum(ed3)
)
savehistory("D:/SRS/data_SRS/Hydrologie_calculs/hydrowork1edisto.Rhistory")
summary(ed3)
intersect(ed3$Index,aik1$Index)
summary(aik1)
fix(ed2)
ed4<-to.period(ed3,"months")
periodicity(aik1)
periodicity(ed3)
periodicity(ed4)
aik2<-as.data.frame(aik1)
edi2<-as.data.frame(ed3)
write.csv(aik1,file="aik1.csv")
write.csv(aik2,file="aik2.csv")
write.csv(edi2,file="edi2.csv")
View(edi2)
plot(ed3)
plot(ed2)
save.image("D:/SRS/data_SRS/Hydrologie_calculs/Edisto.RData")
setwd("D:/SRS/data_SRS/Hydrologie_calculs")
load("D:/SRS/data_SRS/Hydrologie_calculs/Edisto.RData")
View(edisto)
setwd("D:/Ascem/water_level_meas")
wl<-read.table("aquifer_thickness.csv",sep=",",header=TRUE)
wl<-read.table("aquifer_thickness.csv",sep=",",header=TRUE)
wl<-read.table("aquifer_thickness.csv",sep=",",header=TRUE)
View(wl)
default.stringsAsFactors()
hist(wl$AQ_THICKNESS)
attach(wl)
tapply(AQ_THICKNESS,STATION_ID,mean)
tapply(AQ_THICKNESS,STATION_ID,sd)
boxplot(AQ_THICKNESS ~ STATION_ID)
text(STATION_ID, c(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0) , row.names(STATION_ID), cex=0.6, pos=4, col="red")
boxplot(AQ_THICKNESS ~ STATION_ID, horizontal=TRUE)
wl$AQ_THICKNESS[wl$AQ_THICKNESS<0]<-NA
boxplot(AQ_THICKNESS ~ STATION_ID, horizontal=TRUE)
detach(wl)
wl$AQ_THICKNESS[wl$AQ_THICKNESS<0]<-NA
attach(wl)
boxplot(AQ_THICKNESS ~ STATION_ID, horizontal=TRUE,na.omit)
boxplot(AQ_THICKNESS ~ STATION_ID, horizontal=TRUE)
boxplot(AQ_THICKNESS ~ STATION_ID, horizontal=TRUE,outline=FALSE)
detach(wl)
wl$date<-as.Date(wl$MEASUREMENT_DATE)
wl$date<-as.Date(wl$MEASUREMENT_DATE,format="%m/%d/%Y")
View(wl)
plot(wl$date,wl$AQ_THICKNESS~wl$STATION_ID)
plot(wl$date[wl$STATION_ID=="FSB 78"],wl$AQ_THICKNESS[wl$STATION_ID=="FSB 78"])
plot(wl$date[wl$STATION_ID=="FSB 94D"],wl$AQ_THICKNESS[wl$STATION_ID=="FSB 94D"])
plot(wl$date[wl$STATION_ID=="FSB 94DR"],wl$AQ_THICKNESS[wl$STATION_ID=="FSB 94DR"])
plot(wl$date[wl$STATION_ID=="FSB 95DR"],wl$AQ_THICKNESS[wl$STATION_ID=="FSB 95DR"])
plot(wl$date[wl$STATION_ID=="FSB 120D"],wl$AQ_THICKNESS[wl$STATION_ID=="FSB 120D"])
plot(wl$date[wl$STATION_ID=="FSB 120D"],wl$AQ_THICKNESS[wl$STATION_ID=="FSB 120D"])
plot(wl$date[wl$STATION_ID=="FSB120D"],wl$AQ_THICKNESS[wl$STATION_ID=="FS120D"])
plot(na.omit(wl$date[wl$STATION_ID=="FSB120D"]),na.omit(wl$AQ_THICKNESS[wl$STATION_ID=="FS120D"])
)
plot(na.omit(wl$date[wl$STATION_ID=="FSB120D"]),na.omit(wl$AQ_THICKNESS[wl$STATION_ID=="FS120D"]))
length(wl$date[wl$STATION_ID=="FSB120D"])
length(wl$AQ_THICKNESS[wl$STATION_ID=="FSB120D"])
plot(na.omit(wl$date[wl$STATION_ID=="FSB120D"]),na.omit(wl$AQ_THICKNESS[wl$STATION_ID=="FS120D"]))
plot(wl$date[wl$STATION_ID=="FSB120D"],wl$AQ_THICKNESS[wl$STATION_ID=="FS120D"])
plot(wl$date[wl$STATION_ID=="FSB120D"],wl$AQ_THICKNESS[wl$STATION_ID=="FSB120D"])
attach(wl)
boxplot(AQ_THICKNESS ~ STATION_ID, horizontal=TRUE)
load("D:/SRS/data_SRS/Hydrologie_calculs/Edisto.RData")
fix(edisto1)
sum(edisto3)
plot(edisto3)
plot(ed1)
plot(ed3)
sum(aik1)
View(aiken)
View(aiken1)
View(aiken)
a<-aiken$Total*.0254;
View(edi2)
b<-edi2$V1*86400*.304^3*30;
sum(a)-sum(b)/(198*1.612^2)
sum(a)-sum(b)/(198*1612^2)
library(xts)
library(zoo)
a1<-read.table("Aiken5SE_1940_1966.txt",header=1,sep="\t")
e1<-read.table("Edisto_discharge.csv",header=1,sep=",")
#edisto2<-read.zoo("Edisto_discharge.csv", format = "%m/%d/%Y", sep=",", header=TRUE)
setwd("D:/SRS/data_SRS/Hydrologie_calculs")
a1<-read.table("Aiken5SE_1940_1966.txt",header=1,sep="\t")
e1<-read.table("Edisto_discharge.csv",header=1,sep=",")
View(`a1`)
a2<-a1$Total*.254;
sum(a1$Total(1:10))
sum(a1$Total[1:10])
sum(a1$Total[1:12])/1000
View(`e1`)
View(`e1`)
e2<-e1$discharge*86400*.3048^3/(198*1612^2);
a2<-a1$Total/1000
sum(a2)-sum(e2)
sum(a2)
sum(e2)
max(e2)
min(e2)
a2<-a1$Total*.000254
sum(a2)-sum(e2)
sum(a2)
sum(a2)/(1966-1940)
(sum(a2)-sum(e2))/(1966-1940)
(sum(a2)-sum(e2))/(1966-1939)
(sum(a2)-sum(e2))/(1966-1940)*(1/.0254)
((sum(a2)-sum(e2)/.0254)/(1966-1940))
((sum(a2)-sum(e2))/.0254)/(1966-1940))
(((sum(a2)-sum(e2))/.0254)/(1966-1940)
)
(((sum(a2)-sum(e2))/.0254)/(1966-1940))
sum(a2)/(1966-1940)/.0254
sum(e2)/(1966-1940)/.0254
57*.4
57*.75
library(zoo)
library(xts)
load("D:/SRS/data_SRS/Hydrologie_calculs/Edisto.RData")
ed5<-apply.yearly(ed3,sum)
plot(ed5)
aik5<-apply.yearly(aik1,sum)
plot(aik1)
plot(aik5)
aik5[1]
aik5[1,2]
aik5[1,1]
help(xts)
aik6<-as.data.frame(aik5)
View(aik6)
t1<-read.table("TC1.txt",header=1,sep="\t")
setwd("D:/SRS/data_SRS/Hydrologie_calculs")
t1<-read.table("TC1.txt",header=1,sep="\t")
View(`t1`)
t2<-as.xts(t1)
View(aik6)
View(aik6)
ed6<-as.data.frame(ed5)
View(ed6)
View(ed6)
View(edi2)
View(edi2)
View(aik2)
save.image("D:/SRS/data_SRS/Hydrologie_calculs/TC.RData")
setwd("D:/LearningLanguages/R_proj/kriging2")
install.packages("gstat")
install.packages(c("date", "fields", "mapdata", "maps", "rgdal", "rgeos", "spatial", "zoo"))
library(gstat)
install.packages(c("gstat", "sp", "zoo", "xts"))
install.packages(c("maps", "MCMCpack", "spgrass6", "mapdata", "mapproj"))
setwd("D:/LearningLanguages/R_proj/kriging2")
library(gstat)
d <- read.csv('elev.csv')
e <- na.omit(d)
coordinates(e) <- ~ x+y
bubble(e, zcol='elev', fill=FALSE, do.sqrt=FALSE, maxsize=2)
x.range <- as.integer(range(e@coords[,1]))
y.range <- as.integer(range(e@coords[,2]))
grd <- expand.grid(x=seq(from=x.range[1], to=x.range[2], by=500), y=seq(from=y.range[1], to=y.range[2], by=500) )
coordinates(grd) <- ~ x+y
gridded(grd) <- TRUE
plot(grd, cex=0.5)
points(e, pch=1, col='red', cex=0.7)
title("Interpolation Grid and Sample Points")
g <- gstat(id="elev", formula=elev ~ 1, data=e)
plot(variogram(g, map=TRUE, cutoff=4000, width=200), threshold=10)
v <- variogram(g, alpha=c(0,45,90,135))
v.fit <- fit.variogram(v, model=vgm(model='Lin' , anis=c(0, 0.5)))
plot(v, model=v.fit, as.table=TRUE)
g <- gstat(g, id="elev", model=v.fit )
p <- predict(g, model=v.fit, newdata=grd)
par(mar=c(2,2,2,2))
image(p, col=terrain.colors(20))
contour(p, add=TRUE, drawlabels=FALSE, col='brown')
points(e, pch=4, cex=0.5)
title('OK Prediction')
pts <- list("sp.points", e, pch = 4, col = "black", cex=0.5)
spplot(p, zcol="elev.pred", col.regions=terrain.colors(20), cuts=19, sp.layout=list(pts), contour=TRUE, labels=FALSE, pretty=TRUE, col='brown', main='OK Prediction')
spplot(p, zcol='elev.var', col.regions=heat.colors(100), cuts=99, main='OK Variance',sp.layout=list(pts) )
setwd("D:/SRS/data_SRS/Hydrologie_calculs")
setwd("D:/Ascem/data/precipitation")
raingauges<-read.table("rain_gages_coords.txt", sep='\t')
View(raingauges)
View(raingauges)
raingauges<-read.table("rain_gages_coords.txt", sep='\t',header=TRUE)
install.packages("kml")
library(kml)
install.packages("shapefiles")
install.packages("maptools")
install.packages("rgdal")
library(rgdal)
library(maptools)
gpclibPermit()
gpclibPermit()
gpclibPermit(TRUE)
gpclibPermit()<-TRUE
gpclibPermit()
install.packages("rgeos")
library(maptools)
head(raingauges)
coordinates(raingauges)<-c("Long","Lat")
setwd("D:/SRS/data_SRS/Hydrologie_calculs")
load("D:/SRS/data_SRS/Hydrologie_calculs/TC.RData")
setwd("D:/SRS/data_SRS/Hydrologie_calculs")
load("D:/SRS/data_SRS/Hydrologie_calculs/TC.RData")
fix(t.zoo)
rm(t.zoo)
t2<-read.zoo("TC1.txt",format = "%m/%d/%Y",header=TRUE,sep="\t")
library(xts)
t2<-read.zoo("TC1.txt",format = "%m/%d/%Y",header=TRUE,sep="\t")
t3<-as.xts(t2)
e2<-read.zoo("Edisto_discharge.csv"format = "%m/%d/%Y",header=TRUE,sep=",")
e2<-read.zoo("Edisto_discharge.csv",format = "%m/%d/%Y",header=TRUE,sep=",")
e3<-as.xts(e2)
t4<-apply.yearly(t3,sum)
e4<-apply.yearly(e3,sum)
t5<-as.data.frame(t4)
e5<-as.data.frame(e4)
View(`t5`)
write.csv(e5, file="Edito_annual.csv")
write.csv(t5, file="TC_annual.csv")
sum(!is.na(t3))
sum(is.na(t3))
t4b<-apply.monthly(t3,sum)
sum(is.na(t4b))
sum(!is.na(t4b))
t5b<-as.data.frame(t4b)
write.csv(t5b, file="TC_monthly.csv")
t2<-read.zoo("TC1.txt",format = "%m/%d/%Y",header=TRUE,sep="\t")
library(zoo)
library(xts)
t2<-read.zoo("TC1.txt",format = "%m/%d/%Y",header=TRUE,sep="\t")
t3<-as.xts(t2)
t3b<-as.xts(na.omit(t2))
setwd("D:/SRS/data_SRS/Hydrologie_calculs")
t2<-read.zoo("TC1.txt",format = "%m/%d/%Y",header=TRUE,sep="\t")
t3b<-as.xts(na.omit(t2))
t4b<-apply.yearly(t3b,sum)
fix(`t4b`)
fix(`t4b`)
t5b<-as.data.frame(t4b)
View(`t5b`)
View(`t5b`)
save.image("D:/SRS/data_SRS/Hydrologie_calculs/TC2.RData")
setwd("D:/LearningLanguages/R")
source('D:/LearningLanguages/R/monty.R')
source('D:/LearningLanguages/R/monty.R')
monty(strat="stay",N=10000)
monty(strat="switch",N=10000)
monty(strat="random",N=10000)
31+28+31+30+31+30+31+31+30+31+30+31
365.25/12
(108*365.25+30.4375*8+7)*86400
(108*365.24+30.4375*8+7)*86400
365.24/12
(108*365.24+30.43667*8+7)*86400
31+28+31+30+31+30+31+20+11
install.packages(c("mapdata", "maptools", "gstat", "geoR", "geoRglm", "plyr", "ggplot2"))
install.packages("scatterplot3d")
source('D:/LearningLanguages/R_env/install_packages_of_interest.R')
install.packages("rworldmap")
install.packages(c("lattice", "latticeExtra", "LatticeKrig"))
pkg<-c()
pkg<-c(pkg,"TeachingDemos")
install.packages(pkg)
library(TeachingDemos)
clt.examp(n = 1, reps = 10000, nclass = 16, norm.param=list(mean=0,sd=1),
gamma.param=list(shape=1, rate=1/3), unif.param=list(min=0,max=1),
beta.param=list(shape1=0.35, shape2=0.25))
setwd("D:/LearningLanguages/R_proj/kriging3")
library(gstat)
library(lattice)
data(meuse);
rm(pkg)
meuse=meuse[, c("x", "y", "zinc", "dist")]
meuse$logZinc=log(meuse$zinc)
Transects=seq(from=330000, by=700, length=5);
Sampled=meuse[which(x=(meuse$y>Transects[1]-100 & meuse$y< (Transects[1]+100) ) |
(meuse$y>Transects[2]-100 & meuse$y< (Transects[2]+100) ) |
(meuse$y>Transects[3]-100 & meuse$y< (Transects[3]+100) ) |
(meuse$y>Transects[4]-100 & meuse$y< (Transects[4]+100) ) |
(meuse$y>Transects[5]-100 & meuse$y< (Transects[5]+100) ) ), ]
coordinates(meuse)=c("x", "y");
coordinates(Sampled)=c("x", "y");
plot(meuse)
points(Sampled, pch=20, cex=1.5)
W=W+10
Var=variogram(logZinc~sqrt(dist), Sampled, cutoff=1300, width=90);
plot(Var)## calculate variogram
Var.Fit=fit.variogram(Var, vgm(model="Sph", nugget=0.1, psill=0.3,range=800));
plot(Var, Var.Fit)
data(meuse.grid)
coordinates(meuse.grid) <- c("x", "y")
meuse.grid <- as(meuse.grid, "SpatialPixelsDataFrame")
Pred=krige(logZinc~sqrt(dist), Sampled, meuse.grid, Var.Fit)#,
block=c(40,40)) ## predict by kriging
meuse.grid$Zinc.logPred=Pred$var1.pred; ## log-transformed predictions
meuse.grid$Zinc.Var=Pred$var1.var;  ## log-transformed variances
meuse.grid$Zinc.Pred.BT=exp(meuse.grid$Zinc.logPred+meuse.grid$Zinc.Var/2)
trellis.par.set(sp.theme()) ## plot
spplot(meuse.grid["Zinc.logPred"], main="Kriging Prediction")
spplot(meuse.grid["Zinc.Var"], main="Kriging variance")
mean(meuse$zinc)
mean(meuse.grid$Zinc.Pred.BT)
rm(list=ls())
library(gstat)
RSessionInfo()
SessionInfo()
sessionInfo()
demo(examples)
